<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script type='text/javascript' src='https://cdn.yodlee.com/fastlink/v4/initialize.js'></script>
</head>
<body>
    <div id="container-fastlink"></div>
    <script type='text/javascript'>
        window.onload = function () {
            const urlParams = new URLSearchParams(window.location.search);
            const token = urlParams.get('token');
            alert(token);
            window.fastlink.open({
                fastLinkURL: 'https://fl4.preprod.yodlee.com/authenticate/USDevexPreProd2-389/fastlink/?channelAppName=usdevexpreprod2',
                // fastLinkURL: 'https://fl4.sandbox.yodlee.com/authenticate/restserver/fastlink',
                
                accessToken: 'Bearer ' + token,
                forceIframe: true,
                params: {
                    configName: 'Aggregation'
                },
                onSuccess: function (data) {
                    YWebViewHandler.postMessage(data);
                },
                onError: function (data) {
                    // will be called on error. For list of possible message, refer to onError(data) Method.
                    console.log('Spike error');
                    console.log(data);
                },
                onClose: function (data) {
                    // will be called called to close FastLink. For list of possible message, refer to onClose(data) Method.
                    console.log('Spike close');
                    console.log(data);
                },
                onEvent: function (data) {
                    // will be called on intermittent status update.
                    console.log('Spike event');
                    console.log(data);
                }
            },
                'container-fastlink');
        }
    </script>
</body>
</html>
